{"uid":"e9dea0cecace6756","name":"test_refine_html_complex_nested_structures[fragment_with_text_before_and_after_elements-\\n                    Text before elements\\n                    <div>Content inside div</div>\\n                    Text between elements\\n                    <p>Content inside paragraph</p>\\n                    Text after elements\\n                    -\\n                    <p>Text before elements </p><div>Content inside div</div>\\n                    Text between elements\\n                    <p>Content inside paragraph</p>\\n                    Text after elements\\n                    ]","fullName":"tests.test_refine_html.TestClearHtmlComplexEdgeCases#test_refine_html_complex_nested_structures","historyId":"4e3aae5b50040317babeeecc359a3514","time":{"start":1748439746383,"stop":1748439746385,"duration":2},"description":"Test handling of complex nested structures with text nodes.","descriptionHtml":"<p>Test handling of complex nested structures with text nodes.</p>\n","status":"failed","statusMessage":"AssertionError: assert 'Text before ...fter elements' == '<p>Text befo...fter elements'\n  \n  - <p>Text before elements </p><div>Content inside div</div> Text between elements <p>Content inside paragraph</p> Text after elements\n  ? ---                     ----\n  + Text before elements <div>Content inside div</div> Text between elements <p>Content inside paragraph</p> Text after elements","statusTrace":"self = <test_refine_html.TestClearHtmlComplexEdgeCases object at 0x7f703bf72180>\ntest_id = 'fragment_with_text_before_and_after_elements'\ninput_html = '\\n                    Text before elements\\n                    <div>Content inside div</div>\\n                    Te...ts\\n                    <p>Content inside paragraph</p>\\n                    Text after elements\\n                    '\nexpected_output = '\\n                    <p>Text before elements </p><div>Content inside div</div>\\n                    Text between elements\\n                    <p>Content inside paragraph</p>\\n                    Text after elements\\n                    '\n\n    @pytest.mark.parametrize(\n        \"test_id, input_html, expected_output\",\n        [\n            (\n                \"deeply_nested_structure_with_mixed_valid_invalid_tags\",\n                \"\"\"\n                    <section>\n                        <article>\n                            <custom-section>\n                                <header>\n                                    <h1>Title</h1>\n                                    <nav>\n                                        <ul>\n                                            <li>Item 1</li>\n                                            <li>Item 2</li>\n                                        </ul>\n                                    </nav>\n                                </header>\n                                <div>\n                                    <p>This is a paragraph</p>\n                                    <unknown-tag>Should be preserved <strong>but unwrapped</strong></unknown-tag>\n                                </div>\n                                <footer>Footer content</footer>\n                            </custom-section>\n                        </article>\n                    </section>\n                    \"\"\",\n                \"\"\"\n                                <h1 class=\"display-4 fw-semibold text-primary mb-4\">Title</h1>\n    \n                                    <ul>\n                                        <li>Item 1</li>\n                                        <li>Item 2</li>\n                                    </ul>\n    \n                                <div>\n                                    <p>This is a paragraph</p>\n                                    Should be preserved <strong>but unwrapped</strong>\n                                </div>\n                                Footer content\n                    \"\"\",\n            ),\n            (\n                \"fragment_with_text_before_and_after_elements\",\n                \"\"\"\n                    Text before elements\n                    <div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    \"\"\",\n                \"\"\"\n                    <p>Text before elements </p><div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    \"\"\",\n            ),\n        ],\n    )\n    def test_refine_html_complex_nested_structures(self, test_id, input_html, expected_output):\n        \"\"\"Test handling of complex nested structures with text nodes.\"\"\"\n        # Clean HTML and normalize whitespace for comparison\n        cleaned = normalize_whitespace(refine_html(input_html))\n        expected = normalize_whitespace(expected_output)\n    \n>       assert cleaned == expected\nE       AssertionError: assert 'Text before ...fter elements' == '<p>Text befo...fter elements'\nE         \nE         - <p>Text before elements </p><div>Content inside div</div> Text between elements <p>Content inside paragraph</p> Text after elements\nE         ? ---                     ----\nE         + Text before elements <div>Content inside div</div> Text between elements <p>Content inside paragraph</p> Text after elements\n\ntests/test_refine_html.py:630: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"epic","value":"Clear HTML"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_refine_html"},{"name":"subSuite","value":"TestClearHtmlComplexEdgeCases"},{"name":"host","value":"fv-az1372-936"},{"name":"thread","value":"2511-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_refine_html"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_output","value":"'\n                    <p>Text before elements </p><div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    '"},{"name":"input_html","value":"'\n                    Text before elements\n                    <div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    '"},{"name":"test_id","value":"'fragment_with_text_before_and_after_elements'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":28,"unknown":0,"total":29},"items":[{"uid":"ae6b47034c59e4ad","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/45/index.html#testresult/ae6b47034c59e4ad","status":"passed","time":{"start":1747974107267,"stop":1747974107267,"duration":0}},{"uid":"a9e955bcde71e0e7","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/44/index.html#testresult/a9e955bcde71e0e7","status":"passed","time":{"start":1747973992000,"stop":1747973992001,"duration":1}},{"uid":"caa2b9e39cd58271","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/43/index.html#testresult/caa2b9e39cd58271","status":"passed","time":{"start":1747973102909,"stop":1747973102910,"duration":1}},{"uid":"2ca4356308981e4d","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/42/index.html#testresult/2ca4356308981e4d","status":"passed","time":{"start":1747972416877,"stop":1747972416877,"duration":0}},{"uid":"b679bfbd120aaf33","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/41/index.html#testresult/b679bfbd120aaf33","status":"passed","time":{"start":1747972253995,"stop":1747972253995,"duration":0}},{"uid":"7fbd612f163c7d79","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/40/index.html#testresult/7fbd612f163c7d79","status":"passed","time":{"start":1747885747697,"stop":1747885747697,"duration":0}},{"uid":"e0d204b18330e164","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/39/index.html#testresult/e0d204b18330e164","status":"passed","time":{"start":1747885667727,"stop":1747885667727,"duration":0}},{"uid":"1788428787708196","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/38/index.html#testresult/1788428787708196","status":"passed","time":{"start":1747654265564,"stop":1747654265565,"duration":1}},{"uid":"69b4732ff3519371","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/37/index.html#testresult/69b4732ff3519371","status":"passed","time":{"start":1747654099848,"stop":1747654099848,"duration":0}},{"uid":"68715e65e8f9066c","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/36/index.html#testresult/68715e65e8f9066c","status":"passed","time":{"start":1747653324917,"stop":1747653324918,"duration":1}},{"uid":"ab676d34dfeba3b7","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/35/index.html#testresult/ab676d34dfeba3b7","status":"passed","time":{"start":1747652944619,"stop":1747652944620,"duration":1}},{"uid":"f2a14d238fd7323c","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/34/index.html#testresult/f2a14d238fd7323c","status":"passed","time":{"start":1747554146131,"stop":1747554146131,"duration":0}},{"uid":"14fb8e8a15b90514","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/33/index.html#testresult/14fb8e8a15b90514","status":"passed","time":{"start":1747553559800,"stop":1747553559800,"duration":0}},{"uid":"a5e0e735f05b55a1","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/32/index.html#testresult/a5e0e735f05b55a1","status":"passed","time":{"start":1747488468015,"stop":1747488468016,"duration":1}},{"uid":"5bf18c5bf6d93160","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/31/index.html#testresult/5bf18c5bf6d93160","status":"passed","time":{"start":1747488230801,"stop":1747488230802,"duration":1}},{"uid":"da6ebed0e17b937c","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/30/index.html#testresult/da6ebed0e17b937c","status":"passed","time":{"start":1747479519434,"stop":1747479519435,"duration":1}},{"uid":"82548e9cf238bf3a","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/29/index.html#testresult/82548e9cf238bf3a","status":"passed","time":{"start":1747479246888,"stop":1747479246889,"duration":1}},{"uid":"20ea3ea0503e5e46","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/28/index.html#testresult/20ea3ea0503e5e46","status":"passed","time":{"start":1747371770939,"stop":1747371770939,"duration":0}},{"uid":"bb1c5cc8f89fe30","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/27/index.html#testresult/bb1c5cc8f89fe30","status":"passed","time":{"start":1747285625337,"stop":1747285625337,"duration":0}},{"uid":"7330cc97755f1faf","reportUrl":"https://andgineer.github.io/pagesmith/builds/tests/26/index.html#testresult/7330cc97755f1faf","status":"passed","time":{"start":1747209880134,"stop":1747209880135,"duration":1}}]},"tags":[]},"source":"e9dea0cecace6756.json","parameterValues":["'\n                    <p>Text before elements </p><div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    '","'\n                    Text before elements\n                    <div>Content inside div</div>\n                    Text between elements\n                    <p>Content inside paragraph</p>\n                    Text after elements\n                    '","'fragment_with_text_before_and_after_elements'"]}